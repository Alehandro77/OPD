<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Профиль</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <style>
        .error {
            color: red;
        }
        /* Стили для "карусели" */
        .time-selector {
            display: flex;
            align-items: center;
        }

        .time-value {
            width: 30px;
            text-align: center;
            font-size: 1.2em;
            cursor: pointer;
            user-select: none;
        }

        .time-value.faded {
            color: #ccc; /* Более бледный цвет */
        }

        .time-value.current {
            font-weight: bold;
        }

        .time-separator {
            margin: 0 5px;
            font-size: 1.2em;
        }
    </style>
</head>
<body>
    <nav>
        <ul>
            <li><a href="{{ url_for('index') }}">Главная</a></li>
            <li><a href="{{ url_for('profile') }}">Профиль</a></li>
            <li><a href="{{ url_for('logout') }}">Выйти</a></li>
        </ul>
    </nav>
    <div class="container">
        <h2>Профиль</h2>
        <div id="form-errors" class="error"></div>
        <form method="post" action="{{ url_for('profile') }}" data-profile-url="{{ url_for('profile') }}">
            <label for="age">Возраст:</label><br>
            <input type="number" id="age" name="age" value="{{ profile.age if profile }}" required>
            <span id="age-error" class="error"></span><br><br>

            <label for="weight">Вес:</label><br>
            <input type="number" id="weight" name="weight" step="0.1" value="{{ profile.weight if profile }}" required>
            <span id="weight-error" class="error"></span><br><br>

            <label>Во сколько вам нужно проснуться в понедельник?:</label><br>
            <div class="time-selector">
                <div class="time-value faded" data-action="decrement" data-target="wake_up_time_monday_hours">-</div>
                <div class="time-value current" data-value="wake_up_time_monday_hours">
                    <span id="wake_up_time_monday_hours_display">{{ "%02d"|format(profile.wake_up_time_monday_hours) if profile else "00" }}</span>
                    <input type="hidden" id="wake_up_time_monday_hours" name="wake_up_time_monday_hours" value="{{ profile.wake_up_time_monday_hours if profile else "0" }}">
                </div>
                <div class="time-value faded" data-action="increment" data-target="wake_up_time_monday_hours">+</div>
                <span class="time-separator">:</span>
                 <div class="time-value faded" data-action="decrement" data-target="wake_up_time_monday_minutes">-</div>
                <div class="time-value current" data-value="wake_up_time_monday_minutes">
                    <span id="wake_up_time_monday_minutes_display">{{ "%02d"|format(profile.wake_up_time_monday_minutes) if profile else "00" }}</span>
                    <input type="hidden" id="wake_up_time_monday_minutes" name="wake_up_time_monday_minutes" value="{{ profile.wake_up_time_monday_minutes if profile else "0" }}">
                </div>
                <div class="time-value faded" data-action="increment" data-target="wake_up_time_monday_minutes">+</div>
            </div>
            <span id="wake_up_time_monday-error" class="error"></span><br><br>

            <!-- Повторите этот блок для остальных дней недели -->
            <label>Во сколько вам нужно проснуться во вторник?:</label><br>
            <div class="time-selector">
                <div class="time-value faded" data-action="decrement" data-target="wake_up_time_tuesday_hours">-</div>
                <div class="time-value current" data-value="wake_up_time_tuesday_hours">
                    <span id="wake_up_time_tuesday_hours_display">{{ "%02d"|format(profile.wake_up_time_tuesday_hours) if profile else "00" }}</span>
                    <input type="hidden" id="wake_up_time_tuesday_hours" name="wake_up_time_tuesday_hours" value="{{ profile.wake_up_time_tuesday_hours if profile else "0" }}">
                </div>
                <div class="time-value faded" data-action="increment" data-target="wake_up_time_tuesday_hours">+</div>
                <span class="time-separator">:</span>
                 <div class="time-value faded" data-action="decrement" data-target="wake_up_time_tuesday_minutes">-</div>
                <div class="time-value current" data-value="wake_up_time_tuesday_minutes">
                    <span id="wake_up_time_tuesday_minutes_display">{{ "%02d"|format(profile.wake_up_time_tuesday_minutes) if profile else "00" }}</span>
                    <input type="hidden" id="wake_up_time_tuesday_minutes" name="wake_up_time_tuesday_minutes" value="{{ profile.wake_up_time_tuesday_minutes if profile else "0" }}">
                </div>
                <div class="time-value faded" data-action="increment" data-target="wake_up_time_tuesday_minutes">+</div>
            </div>
            <span id="wake_up_time_tuesday-error" class="error"></span><br><br>

                        <label>Во сколько вам нужно проснуться в среду?:</label><br>
            <div class="time-selector">
                <div class="time-value faded" data-action="decrement" data-target="wake_up_time_wednesday_hours">-</div>
                <div class="time-value current" data-value="wake_up_time_wednesday_hours">
                    <span id="wake_up_time_wednesday_hours_display">{{ "%02d"|format(profile.wake_up_time_wednesday_hours) if profile else "00" }}</span>
                    <input type="hidden" id="wake_up_time_wednesday_hours" name="wake_up_time_wednesday_hours" value="{{ profile.wake_up_time_wednesday_hours if profile else "0" }}">
                </div>
                <div class="time-value faded" data-action="increment" data-target="wake_up_time_wednesday_hours">+</div>
                <span class="time-separator">:</span>
                 <div class="time-value faded" data-action="decrement" data-target="wake_up
                 _time_wednesday_minutes">-</div>
                 <div class="time-value current" data-value="wake_up_time_wednesday_minutes">
                     <span id="wake_up_time_wednesday_minutes_display">{{ "%02d"|format(profile.wake_up_time_wednesday_minutes) if profile else "00" }}</span>
                     <input type="hidden" id="wake_up_time_wednesday_minutes" name="wake_up_time_wednesday_minutes" value="{{ profile.wake_up_time_wednesday_minutes if profile else "0" }}">
                 </div>
                 <div class="time-value faded" data-action="increment" data-target="wake_up_time_wednesday_minutes">+</div>
             </div>
             <span id="wake_up_time_wednesday-error" class="error"></span><br><br>
 
                         <label>Во сколько вам нужно проснуться в четверг?:</label><br>
             <div class="time-selector">
                 <div class="time-value faded" data-action="decrement" data-target="wake_up_time_thursday_hours">-</div>
                 <div class="time-value current" data-value="wake_up_time_thursday_hours">
                     <span id="wake_up_time_thursday_hours_display">{{ "%02d"|format(profile.wake_up_time_thursday_hours) if profile else "00" }}</span>
                     <input type="hidden" id="wake_up_time_thursday_hours" name="wake_up_time_thursday_hours" value="{{ profile.wake_up_time_thursday_hours if profile else "0" }}">
                 </div>
                 <div class="time-value faded" data-action="increment" data-target="wake_up_time_thursday_hours">+</div>
                 <span class="time-separator">:</span>
                  <div class="time-value faded" data-action="decrement" data-target="wake_up_time_thursday_minutes">-</div>
                 <div class="time-value current" data-value="wake_up_time_thursday_minutes">
                     <span id="wake_up_time_thursday_minutes_display">{{ "%02d"|format(profile.wake_up_time_thursday_minutes) if profile else "00" }}</span>
                     <input type="hidden" id="wake_up_time_thursday_minutes" name="wake_up_time_thursday_minutes" value="{{ profile.wake_up_time_thursday_minutes if profile else "0" }}">
                 </div>
                 <div class="time-value faded" data-action="increment" data-target="wake_up_time_thursday_minutes">+</div>
             </div>
             <span id="wake_up_time_thursday-error" class="error"></span><br><br>
 
                         <label>Во сколько вам нужно проснуться в пятницу?:</label><br>
             <div class="time-selector">
                 <div class="time-value faded" data-action="decrement" data-target="wake_up_time_friday_hours">-</div>
                 <div class="time-value current" data-value="wake_up_time_friday_hours">
                     <span id="wake_up_time_friday_hours_display">{{ "%02d"|format(profile.wake_up_time_friday_hours) if profile else "00" }}</span>
                     <input type="hidden" id="wake_up_time_friday_hours" name="wake_up_time_friday_hours" value="{{ profile.wake_up_time_friday_hours if profile else "0" }}">
                 </div>
                 <div class="time-value faded" data-action="increment" data-target="wake_up_time_friday_hours">+</div>
                 <span class="time-separator">:</span>
                  <div class="time-value faded" data-action="decrement" data-target="wake_up_time_friday_minutes">-</div>
                 <div class="time-value current" data-value="wake_up_time_friday_minutes">
                     <span id="wake_up_time_friday_minutes_display">{{ "%02d"|format(profile.wake_up_time_friday_minutes) if profile else "00" }}</span>
                     <input type="hidden" id="wake_up_time_friday_minutes" name="wake_up_time_friday_minutes" value="{{ profile.wake_up_time_friday_minutes if profile else "0" }}">
                    </div>
                    <div class="time-value faded" data-action="increment" data-target="wake_up_time_friday_minutes">+</div>
                </div>
                <span id="wake_up_time_friday-error" class="error"></span><br><br>
    
                            <label>Во сколько вам нужно проснуться в субботу?:</label><br>
                <div class="time-selector">
                    <div class="time-value faded" data-action="decrement" data-target="wake_up_time_saturday_hours">-</div>
                    <div class="time-value current" data-value="wake_up_time_saturday_hours">
                        <span id="wake_up_time_saturday_hours_display">{{ "%02d"|format(profile.wake_up_time_saturday_hours) if profile else "00" }}</span>
                        <input type="hidden" id="wake_up_time_saturday_hours" name="wake_up_time_saturday_hours" value="{{ profile.wake_up_time_saturday_hours if profile else "0" }}">
                    </div>
                    <div class="time-value faded" data-action="increment" data-target="wake_up_time_saturday_hours">+</div>
                    <span class="time-separator">:</span>
                     <div class="time-value faded" data-action="decrement" data-target="wake_up_time_saturday_minutes">-</div>
                    <div class="time-value current" data-value="wake_up_time_saturday_minutes">
                        <span id="wake_up_time_saturday_minutes_display">{{ "%02d"|format(profile.wake_up_time_saturday_minutes) if profile else "00" }}</span>
                        <input type="hidden" id="wake_up_time_saturday_minutes" name="wake_up_time_saturday_minutes" value="{{ profile.wake_up_time_saturday_minutes if profile else "0" }}">
                    </div>
                    <div class="time-value faded" data-action="increment" data-target="wake_up_time_saturday_minutes">+</div>
                </div>
                <span id="wake_up_time_saturday-error" class="error"></span><br><br>
    
                            <label>Во сколько вам нужно проснуться в воскресенье?:</label><br>
                <div class="time-selector">
                    <div class="time-value faded" data-action="decrement" data-target="wake_up_time_sunday_hours">-</div>
                    <div class="time-value current" data-value="wake_up_time_sunday_hours">
                        <span id="wake_up_time_sunday_hours_display">{{ "%02d"|format(profile.wake_up_time_sunday_hours) if profile else "00" }}</span>
                        <input type="hidden" id="wake_up_time_sunday_hours" name="wake_up_time_sunday_hours" value="{{ profile.wake_up_time_sunday_hours if profile else "0" }}">
                    </div>
                    <div class="time-value faded" data-action="increment" data-target="wake_up_time_sunday_hours">+</div>
                    <span class="time-separator">:</span>
                     <div class="time-value faded" data-action="decrement" data-target="wake_up_time_sunday_minutes">-</div>
                    <div class="time-value current" data-value="wake_up_time_sunday_minutes">
                        <span id="wake_up_time_sunday_minutes_display">{{ "%02d"|format(profile.wake_up_time_sunday_minutes) if profile else "00" }}</span>
                        <input type="hidden" id="wake_up_time_sunday_minutes" name="wake_up_time_sunday_minutes" value="{{ profile.wake_up_time_sunday_minutes if profile else "0" }}">
                    </div>
                    <div class="time-value faded" data-action="increment" data-target="wake_up_time_sunday_minutes">+</div>
                </div>
                <span id="wake_up_time_sunday-error" class="error"></span><br><br>


                <button type="submit">Сохранить</button>
            </form>
        </div>
        <script src="{{ url_for('static', filename='js/script.js') }}"></script>
        <script>
        document.addEventListener('DOMContentLoaded', function() {
            const timeSelectors = document.querySelectorAll('.time-selector');
    
            timeSelectors.forEach(selector => {
                selector.addEventListener('click', function(event) {
                    const target = event.target;
                    if (target.classList.contains('time-value')) {
                        const action = target.dataset.action;
                        const targetInput = target.dataset.target;
                        const inputElement = document.getElementById(targetInput);
                        const displayElement = document.getElementById(targetInput + '_display');
    
                        if (inputElement && displayElement) {
                            let currentValue = parseInt(inputElement.value);
                            let maxValue = targetInput.includes('hours') ? 23 : 59;
                            let minValue = 0;
    
                            if (action === 'increment') {
                                currentValue = (currentValue + 1) > maxValue ? minValue : (currentValue + 1);
                            } else if (action === 'decrement') {
                                currentValue = (currentValue - 1) < minValue ? maxValue : (currentValue - 1);
                            }
    
                            inputElement.value = currentValue;
                            displayElement.textContent = String(currentValue).padStart(2, '0');
                            }
                        }
                    });
                });
            });
        </script>
</body>
</html>